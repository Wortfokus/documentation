"use strict";(self.webpackChunkwortfokus=self.webpackChunkwortfokus||[]).push([[1535],{5990:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"projects/project-quiz/architecture/full-view","title":"Full view","description":"On this page we have provided you a full overview of our setup.","source":"@site/docs/projects/project-quiz/architecture/full-view.md","sourceDirName":"projects/project-quiz/architecture","slug":"/projects/project-quiz/architecture/full-view","permalink":"/docs/projects/project-quiz/architecture/full-view","draft":false,"unlisted":false,"editUrl":"https://github.com/Wortfokus/documentation/tree/main/docs/projects/project-quiz/architecture/full-view.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Full view"},"sidebar":"projectsSidebar","previous":{"title":"Release - Design","permalink":"/docs/projects/project-quiz/architecture/release-design"},"next":{"title":"Explanation","permalink":"/docs/projects/project-quiz/architecture/Decisions/main"}}');var r=i(4848),t=i(8453);const l={sidebar_position:3,sidebar_label:"Full view"},o="Full view",c={},a=[{value:"1. Objectives",id:"1-objectives",level:2},{value:"2. Component Overview",id:"2-component-overview",level:2},{value:"3. Architecture Diagram",id:"3-architecture-diagram",level:2},{value:"4. Hosting Strategy (Hetzner)",id:"4-hosting-strategy-hetzner",level:2},{value:"5. Authentication Flow",id:"5-authentication-flow",level:2},{value:"6. Deployment (CI/CD with GitHub Actions)",id:"6-deployment-cicd-with-github-actions",level:2},{value:"7. Cost Overview",id:"7-cost-overview",level:2},{value:"8. Advantages of This Setup",id:"8-advantages-of-this-setup",level:2},{value:"9. Outlook",id:"9-outlook",level:2}];function d(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"full-view",children:"Full view"})}),"\n",(0,r.jsx)(n.p,{children:"On this page we have provided you a full overview of our setup."}),"\n",(0,r.jsx)(n.h1,{id:"architecture-and-infrastructure-considerations-for-the-project",children:"Architecture and Infrastructure Considerations for the Project"}),"\n",(0,r.jsxs)(n.p,{children:["This document describes the planned infrastructure and authentication model for a web application consisting of ",(0,r.jsx)(n.strong,{children:"WordPress"}),", ",(0,r.jsx)(n.strong,{children:"Flutter (Web & Mobile)"}),", a ",(0,r.jsx)(n.strong,{children:".NET backend"}),", and ",(0,r.jsx)(n.strong,{children:"Postgres"})," as the database.",(0,r.jsx)(n.br,{}),"\n","The entire solution will be hosted on ",(0,r.jsx)(n.strong,{children:"Hetzner Cloud"})," and will use ",(0,r.jsx)(n.strong,{children:"Firebase Authentication"})," as the central login provider."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-objectives",children:"1. Objectives"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Unified login for all users (WordPress, Flutter Web, Flutter Mobile, .NET API)."}),"\n",(0,r.jsx)(n.li,{children:"Cost-efficient solution, but flexible and scalable."}),"\n",(0,r.jsx)(n.li,{children:"Hosting everything on Hetzner to reduce complexity."}),"\n",(0,r.jsxs)(n.li,{children:["Automated deployments via ",(0,r.jsx)(n.strong,{children:"GitHub Actions"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-component-overview",children:"2. Component Overview"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"WordPress"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Runs on the main domain ",(0,r.jsx)(n.code,{children:"example.org"})]}),"\n",(0,r.jsx)(n.li,{children:"Uses Firebase Authentication via plugin (or custom integration)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Flutter Web App"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Runs on ",(0,r.jsx)(n.code,{children:"quiz.example.org"})]}),"\n",(0,r.jsx)(n.li,{children:"Deployed as a static web app (HTML, JS, CSS) via Nginx container"}),"\n",(0,r.jsx)(n.li,{children:"Flutter Mobile apps also connect to the same backend API"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Backend (.NET API)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Runs on ",(0,r.jsx)(n.code,{children:"api.example.org"})]}),"\n",(0,r.jsx)(n.li,{children:"Delivered as a Docker container"}),"\n",(0,r.jsx)(n.li,{children:"Responsible for business logic and database access"}),"\n",(0,r.jsx)(n.li,{children:"Validates Firebase JWT tokens"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Postgres Database"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Runs in a Docker container on Hetzner VPS"}),"\n",(0,r.jsx)(n.li,{children:"Stores application data (not user logins \u2014 those come from Firebase)"}),"\n",(0,r.jsx)(n.li,{children:"Optional: Admin UI (pgAdmin or Adminer) for DB management"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Firebase Authentication"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Central login solution (Email/Password, Google, Apple, \u2026)"}),"\n",(0,r.jsx)(n.li,{children:"Issues JWT tokens for Flutter and WordPress"}),"\n",(0,r.jsx)(n.li,{children:"Tokens validated in the .NET API"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Redis Cache"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"(Not yet fully defined)."}),"\n",(0,r.jsx)(n.li,{children:"Since we might want a fast way to load informations and store them at the same time, we will include Redis."}),"\n",(0,r.jsx)(n.li,{children:"It would preload all the questions for a game and the user only need to load them."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-architecture-diagram",children:"3. Architecture Diagram"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"              example.org\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502   WordPress   \u2502\n           \u2502 (Firebase-SSO)\u2502\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n                    \u25bc\n              quiz.example.org\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502   Flutter Web App     \u2502\n           \u2502 (and Flutter Mobile)  \u2502\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n    Login + Token   \u2502\n      via Firebase  \u2502\n                    \u25bc\n            \ud83d\udd11 Firebase Auth\n      - User Login (Mail, Google, etc.)\n      - JWT Token for API & WordPress\n                    \u2502\n                    \u25bc\n              api.example.org\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 Docker Host / VPS (Hetzner)   \u2502\n    \u2502                               \u2502\n    \u2502  - .NET API (Container)       \u2502 \u2190 validates JWT\n    \u2502  - Postgres (Container)       \u2502 \u2190 stores data\n    \u2502  - pgAdmin (optional)         \u2502\n    \u2502  - Nginx (Flutter Web)        \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-hosting-strategy-hetzner",children:"4. Hosting Strategy (Hetzner)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"VPS (Hetzner Cloud Server, e.g. CX21 \u2013 2 vCPU, 4 GB RAM, ~6 \u20ac/month)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker host for API, Postgres, Nginx (Flutter Web)"}),"\n",(0,r.jsx)(n.li,{children:"Can also run WordPress \u2192 everything centralized"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Domains"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"example.org"})," \u2192 WordPress"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"quiz.example.org"})," \u2192 Flutter Web (Nginx container)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"api.example.org"})," \u2192 .NET API"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["HTTPS via Let\u2019s Encrypt (e.g. with ",(0,r.jsx)(n.a,{href:"https://traefik.io",children:"Traefik"})," or ",(0,r.jsx)(n.a,{href:"https://nginxproxymanager.com",children:"NGINX Proxy Manager"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Firewall rules (only ports 80, 443, 22 open)"}),"\n",(0,r.jsx)(n.li,{children:"Postgres only accessible inside the Docker network"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-authentication-flow",children:"5. Authentication Flow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["User opens ",(0,r.jsx)(n.code,{children:"quiz.example.org"})," (Flutter Web)."]}),"\n",(0,r.jsx)(n.li,{children:"Login is handled through Firebase SDK (Email/Password or Social Login)."}),"\n",(0,r.jsxs)(n.li,{children:["Firebase issues a ",(0,r.jsx)(n.strong,{children:"JWT token"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Flutter (Web/Mobile) calls ",(0,r.jsx)(n.code,{children:"api.example.org"})," and sends the JWT in the ",(0,r.jsx)(n.code,{children:"Authorization"})," header."]}),"\n",(0,r.jsx)(n.li,{children:".NET API validates the JWT against Firebase public keys."}),"\n",(0,r.jsx)(n.li,{children:"API executes business logic (e.g., start quiz, store score) and persists data in Postgres."}),"\n",(0,r.jsx)(n.li,{children:"WordPress users can also log in through Firebase, ensuring a unified login."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-deployment-cicd-with-github-actions",children:"6. Deployment (CI/CD with GitHub Actions)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"GitHub Actions Workflows"})," for each component:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:".NET API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Build \u2192 Docker Image \u2192 Push to Docker Hub \u2192 Deploy on Hetzner VPS via SSH"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flutter Web"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"flutter build web"})," \u2192 Result packed in Nginx container \u2192 Deploy via Docker"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WordPress"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If containerized: updates & deployments via GitHub Actions"}),"\n",(0,r.jsx)(n.li,{children:"If traditional install: updates via WP-CLI or manually"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Example Workflow for .NET API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'name: Deploy .NET API\n\non:\n  push:\n    branches: [ "main" ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Setup .NET\n        uses: actions/setup-dotnet@v3\n        with:\n          dotnet-version: \'7.0.x\'\n      - name: Build API\n        run: dotnet publish -c Release -o out\n      - name: Docker Build & Push\n        run: |\n          docker build -t myorg/myapi:latest .\n          echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USER }}" --password-stdin\n          docker push myorg/myapi:latest\n      - name: Deploy to Hetzner\n        uses: appleboy/ssh-action@v0.1.10\n        with:\n          host: ${{ secrets.HETZNER_HOST }}\n          username: ${{ secrets.HETZNER_USER }}\n          key: ${{ secrets.HETZNER_SSH_KEY }}\n          script: |\n            docker pull myorg/myapi:latest\n            docker-compose -f /opt/app/docker-compose.yml up -d\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-cost-overview",children:"7. Cost Overview"}),"\n",(0,r.jsxs)(n.p,{children:["We expect the resulting cost to be around 10 - 15\u20ac with this simple setup.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.em,{children:"(But other costs can come up, like Github Pro, Firebase or better Servers)"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hetzner Cloud VPS: ~6\u20138 \u20ac/month"}),"\n",(0,r.jsx)(n.li,{children:"Firebase Authentication: free up to 50,000 logins/month (SMS-based logins are extra)"}),"\n",(0,r.jsx)(n.li,{children:"Domain: ~1\u20132 \u20ac/month\nOptional: Shared Hosting for WordPress (if not containerized) ~3\u20135 \u20ac/month"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-advantages-of-this-setup",children:"8. Advantages of This Setup"}),"\n",(0,r.jsx)(n.p,{children:"Cost-efficient: low base costs, Firebase Auth free for normal usage"}),"\n",(0,r.jsx)(n.p,{children:"Flexible: Docker containers are easy to scale or replace"}),"\n",(0,r.jsx)(n.p,{children:"Secure: Firebase handles authentication, no password storage in your own DB"}),"\n",(0,r.jsx)(n.p,{children:"Centralized: All components hosted on Hetzner \u2192 easy management"}),"\n",(0,r.jsx)(n.p,{children:"Automated: GitHub Actions enables smooth CI/CD pipelines"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-outlook",children:"9. Outlook"}),"\n",(0,r.jsx)(n.p,{children:"Scaling: If traffic grows \u2192 Kubernetes cluster (e.g. Hetzner Cloud + K3s)"}),"\n",(0,r.jsx)(n.p,{children:"Monitoring: Prometheus + Grafana or Hetzner Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Caching: Redis container for performance improvements"}),"\n",(0,r.jsx)(n.p,{children:"Feature Expansion: Roles & permissions via Firebase custom claims"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);